#!/bin/bash
#
# i3-scratchpad
# Taken from https://github.com/EllaTheCat/dopamine/

#  Constants copied from i3-config must maintain consistency.

export cmon="eDP1"
export rmon="HDMI-1-1"

#
# Toggle the scratchpad terminal between show and hide.
#
toggle ()
{
    # Only one key binding is required, the first keypress performs
    # initialisation and hides the terminal again.
    if [ "_$(xdotool search --classname "Spotify" | head -1)"  = "_" ]; then
        com.spotify.Client &
	# Allow the terminal enough time to initialise.
	# This value needs to be "just right", ymmv.
        sleep 1
        xdotool getwindowfocus set_window --classname "Spotify"
        i3-msg "[class=Spotify] resize set 1250 120"
        i3-msg "[class=Spotify] move absolute position center"
        i3-msg "[class=Spotify] move down 475 px"
        i3-msg "[class=Spotify] move scratchpad"
    else
        i3-msg "focus output ${cmon}"
        i3-msg "[class=Spotify] scratchpad show"
        i3-msg "focus tiling"
    fi
}

toggle;

